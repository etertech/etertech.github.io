<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Kubernetes | Etertech - Xudong ZHAO Blog</title>
<meta name=keywords content><meta name=description content="Kubernetes commandes kubectl get namespaces kubectl get pods -A kubectl get po -A kubectl get pods --context default -n kube-system kubectl get services --context squash -n nightly nightly-cloud-mariadb -o yaml kubectl get deployment --context squash -n nightly-cloud kubectl create ns devops --context myContext .kube/config C:\Users\Formation\.kube kubectl apply -f volume.yaml kubectl get pv kubectl apply -f db-secret.yaml kubectl get secrets db-credentials -o yaml kubectl apply -f volumes.yaml kubectl get pv apply -f volumeClaim."><meta name=author content><link rel=canonical href=https://etertech.github.io/posts/kubernetes/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://etertech.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://etertech.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://etertech.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://etertech.github.io/apple-touch-icon.png><link rel=mask-icon href=https://etertech.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Kubernetes"><meta property="og:description" content="Kubernetes commandes kubectl get namespaces kubectl get pods -A kubectl get po -A kubectl get pods --context default -n kube-system kubectl get services --context squash -n nightly nightly-cloud-mariadb -o yaml kubectl get deployment --context squash -n nightly-cloud kubectl create ns devops --context myContext .kube/config C:\Users\Formation\.kube kubectl apply -f volume.yaml kubectl get pv kubectl apply -f db-secret.yaml kubectl get secrets db-credentials -o yaml kubectl apply -f volumes.yaml kubectl get pv apply -f volumeClaim."><meta property="og:type" content="article"><meta property="og:url" content="https://etertech.github.io/posts/kubernetes/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-16T09:17:00+01:00"><meta property="article:modified_time" content="2023-11-16T09:17:00+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Kubernetes"><meta name=twitter:description content="Kubernetes commandes kubectl get namespaces kubectl get pods -A kubectl get po -A kubectl get pods --context default -n kube-system kubectl get services --context squash -n nightly nightly-cloud-mariadb -o yaml kubectl get deployment --context squash -n nightly-cloud kubectl create ns devops --context myContext .kube/config C:\Users\Formation\.kube kubectl apply -f volume.yaml kubectl get pv kubectl apply -f db-secret.yaml kubectl get secrets db-credentials -o yaml kubectl apply -f volumes.yaml kubectl get pv apply -f volumeClaim."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://etertech.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Kubernetes","item":"https://etertech.github.io/posts/kubernetes/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Kubernetes","name":"Kubernetes","description":"Kubernetes commandes kubectl get namespaces kubectl get pods -A kubectl get po -A kubectl get pods --context default -n kube-system kubectl get services --context squash -n nightly nightly-cloud-mariadb -o yaml kubectl get deployment --context squash -n nightly-cloud kubectl create ns devops --context myContext .kube/config C:\\Users\\Formation\\.kube kubectl apply -f volume.yaml kubectl get pv kubectl apply -f db-secret.yaml kubectl get secrets db-credentials -o yaml kubectl apply -f volumes.yaml kubectl get pv apply -f volumeClaim.","keywords":[],"articleBody":"Kubernetes commandes kubectl get namespaces kubectl get pods -A kubectl get po -A kubectl get pods --context default -n kube-system kubectl get services --context squash -n nightly nightly-cloud-mariadb -o yaml kubectl get deployment --context squash -n nightly-cloud kubectl create ns devops --context myContext .kube/config C:\\Users\\Formation\\.kube kubectl apply -f volume.yaml kubectl get pv kubectl apply -f db-secret.yaml kubectl get secrets db-credentials -o yaml kubectl apply -f volumes.yaml kubectl get pv apply -f volumeClaim.yaml kubectl get pvc kubectl logs mariadb-6c57fb4b8-t9vxt kubectl exec -it mariadb-6c57fb4b8-t9vxt -- /bin/sh ctrl + minikube service nom-du-service --url minikube service -n nom_de_space nom_de_service --url kubectl delete pods nom_de_pod kubectl delete pvc nom_de_pvc kubectl delete pv nom_de_pv kubectl edit pod nom_de_pod kubectl get rs kubectl get deployment kubectl get configmap kubectl get pods --watch kubectl get pods,service kubectl logs -f kubectl get pods kubectl get pod -l nom_de_pod kubectl get secrets kubectl get docker-registry -o yaml kubectl get pods -o wide --force --grace-period=0 kubectl get pods --all-namespace kubectl cp nom_de_pod:/opt/test.sh my_stuff pas de cp entre conteneur #supprimer namespace kubectl delete namespace devops kubectl create namespace [nom_du_namespace] kubectl config set-context --current --namespace=devops kubectl get statefulset kubectl get all helm get values my-mariadb Kubernetes choisit les nœuds pour déployer un conteneur en se basant sur les informations des requests, et non sur les limits. Toutefois, en pratique, il est possible de mettre ces deux valeurs égales.\nDéployment peut créer ReplicaSet qui s’occupe de créer des pods\nContrôlleur de déploiment\nimagePullPolicy always restartPolicy: Always\nIngress Sécurité droite Pod, Service… create update delete get list patch watch kind: Role\nrules: ressource verb metadata roleRef kind: Role name: master-managment subjects: namespaces ResourceQuota ensemble des pod ne dépace pas dans cette namespace, spec: hard:\nuntilisateur sur pod est restreint sur un pod\nHelm Le contrôle d’accès basé sur les rôles (« Role-Based Access Control » (RBAC) en anglais)\nCluster Acceccontroller regarder mes requèttes: par example on deopyer un truc, il va compléter les options\ncontroller de deploiment contrôller de\ncore/v1 = v1 apps/v1\nLifecycle readinessProbe: exec: command: - opentf-ctl - get - subscriptions\nkaniko trivy grype ","wordCount":"341","inLanguage":"en","datePublished":"2023-11-16T09:17:00+01:00","dateModified":"2023-11-16T09:17:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://etertech.github.io/posts/kubernetes/"},"publisher":{"@type":"Organization","name":"Etertech - Xudong ZHAO Blog","logo":{"@type":"ImageObject","url":"https://etertech.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://etertech.github.io/ accesskey=h title="Etertech - Xudong ZHAO Blog (Alt + H)">Etertech - Xudong ZHAO Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Kubernetes</h1><div class=post-meta><span title='2023-11-16 09:17:00 +0100 +0100'>November 16, 2023</span></div></header><div class=post-content><h2 id=kubernetes-commandes>Kubernetes commandes<a hidden class=anchor aria-hidden=true href=#kubernetes-commandes>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Shell data-lang=Shell><span style=display:flex><span>kubectl get namespaces
</span></span><span style=display:flex><span>kubectl get pods -A
</span></span><span style=display:flex><span>kubectl get po -A
</span></span><span style=display:flex><span>kubectl get pods --context default -n kube-system
</span></span><span style=display:flex><span>kubectl get services --context squash -n nightly nightly-cloud-mariadb -o yaml
</span></span><span style=display:flex><span>kubectl get deployment --context squash -n nightly-cloud 
</span></span><span style=display:flex><span>kubectl create ns devops --context myContext
</span></span><span style=display:flex><span>.kube/config
</span></span><span style=display:flex><span>C:<span style=color:#ae81ff>\U</span>sers<span style=color:#ae81ff>\F</span>ormation<span style=color:#ae81ff>\.</span>kube
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl apply -f volume.yaml
</span></span><span style=display:flex><span>kubectl get pv
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl apply -f db-secret.yaml
</span></span><span style=display:flex><span>kubectl get secrets db-credentials -o yaml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl apply -f volumes.yaml
</span></span><span style=display:flex><span>kubectl get pv
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>apply -f volumeClaim.yaml
</span></span><span style=display:flex><span>kubectl get pvc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl  logs mariadb-6c57fb4b8-t9vxt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl exec -it mariadb-6c57fb4b8-t9vxt  -- /bin/sh
</span></span><span style=display:flex><span>ctrl + 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>minikube service nom-du-service --url
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>minikube service -n nom_de_space nom_de_service --url
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl delete pods nom_de_pod
</span></span><span style=display:flex><span>kubectl delete pvc nom_de_pvc
</span></span><span style=display:flex><span>kubectl delete pv nom_de_pv
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl edit pod nom_de_pod
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl get rs
</span></span><span style=display:flex><span>kubectl get deployment
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl get configmap
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl get pods --watch
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl get pods,service
</span></span><span style=display:flex><span>kubectl logs -f
</span></span><span style=display:flex><span>kubectl get pods
</span></span><span style=display:flex><span>kubectl get pod -l nom_de_pod
</span></span><span style=display:flex><span>kubectl get secrets 
</span></span><span style=display:flex><span>kubectl get docker-registry -o yaml 
</span></span><span style=display:flex><span>kubectl get pods -o wide
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>--force
</span></span><span style=display:flex><span>--grace-period<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl get pods --all-namespace
</span></span><span style=display:flex><span>kubectl cp nom_de_pod:/opt/test.sh my_stuff
</span></span><span style=display:flex><span>pas de cp entre conteneur
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#supprimer namespace</span>
</span></span><span style=display:flex><span>kubectl delete namespace devops
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl create namespace <span style=color:#f92672>[</span>nom_du_namespace<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>kubectl config set-context --current --namespace<span style=color:#f92672>=</span>devops
</span></span><span style=display:flex><span>kubectl get statefulset
</span></span><span style=display:flex><span>kubectl get all
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>helm get values my-mariadb
</span></span></code></pre></div><p>Kubernetes choisit les nœuds pour déployer un conteneur en se basant sur les informations des requests, et non sur les limits. Toutefois, en pratique, il est possible de mettre ces deux valeurs égales.</p><p>Déployment peut créer ReplicaSet qui s&rsquo;occupe de créer des pods</p><p>Contrôlleur de déploiment</p><p>imagePullPolicy always
restartPolicy: Always</p><h2 id=ingress>Ingress<a hidden class=anchor aria-hidden=true href=#ingress>#</a></h2><h2 id=sécurité>Sécurité<a hidden class=anchor aria-hidden=true href=#sécurité>#</a></h2><h2 id=droite>droite<a hidden class=anchor aria-hidden=true href=#droite>#</a></h2><h3 id=pod-service>Pod, Service&mldr;<a hidden class=anchor aria-hidden=true href=#pod-service>#</a></h3><ul><li>create</li><li>update</li><li>delete</li><li>get</li><li>list</li><li>patch</li><li>watch</li></ul><p>kind: Role</p><p>rules:
ressource
verb
metadata
roleRef
kind: Role
name: master-managment
subjects:
namespaces
ResourceQuota
ensemble des pod ne dépace pas dans cette namespace, spec: hard:</p><p>untilisateur sur pod est restreint sur un pod</p><h2 id=helm>Helm<a hidden class=anchor aria-hidden=true href=#helm>#</a></h2><table><thead><tr><th></th></tr></thead></table><blockquote><ul><li></li></ul></blockquote><p>Le contrôle d&rsquo;accès basé sur les rôles (« Role-Based Access Control » (RBAC) en anglais)</p><p>Cluster
Acceccontroller regarder mes requèttes:
par example on deopyer un truc, il va compléter les options</p><p>controller de deploiment
contrôller de</p><p>core/v1 = v1
apps/v1</p><h2 id=lifecycle>Lifecycle<a hidden class=anchor aria-hidden=true href=#lifecycle>#</a></h2><p>readinessProbe:
exec:
command:
- opentf-ctl
- get
- subscriptions</p><h2 id=kaniko>kaniko<a hidden class=anchor aria-hidden=true href=#kaniko>#</a></h2><h2 id=trivy>trivy<a hidden class=anchor aria-hidden=true href=#trivy>#</a></h2><h2 id=grype>grype<a hidden class=anchor aria-hidden=true href=#grype>#</a></h2></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://etertech.github.io/>Etertech - Xudong ZHAO Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>